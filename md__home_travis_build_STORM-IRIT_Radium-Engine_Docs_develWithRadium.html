<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Radium Engine: How to code in Radium</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js", "TeX/AMSsymbols.js", "TeX/AMSmath.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Radium Engine
   &#160;<span id="projectnumber">28bf594254a312693a0e8cbb8f95fa3e00d4a506</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('md__home_travis_build_STORM-IRIT_Radium-Engine_Docs_develWithRadium.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">How to code in Radium </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>There are three main options to work with Radium:</p>
<ol type="1">
<li>Write a plugin: full access to the Radium data structures, perfect to implement a new fonctionality: mesh processing, rendering.</li>
<li>Write an application: give total control over the GUI, the camera settings, etc...</li>
<li>Contribute to Radium libraries: to improve/extend core components of Radium.</li>
<li>Testing: extend radium tests to improve testing coverage or when adding new functionalities.</li>
</ol>
<h2>Radium Plugin</h2>
<p>Tutorial here: <a href="https://github.com/STORM-IRIT/Radium-PluginExample">https://github.com/STORM-IRIT/Radium-PluginExample</a></p>
<h2>Radium Application</h2>
<p>Tutorial here: <a href="https://github.com/STORM-IRIT/Radium-AppExample">https://github.com/STORM-IRIT/Radium-AppExample</a></p>
<h2>Radium libraries</h2>
<p>Direct contributions to master are closed. Please submit your pull request.</p>
<h2>Radium coding style</h2>
<p>Please follow the scripts/clang-format coding style (tested <code>with clang-format 6.0</code>). To use it, you have to copy or link <code>scripts/clang-format</code> to <code>.clang-format</code> (in Radium-Engine root dir). We also provide a pre commit hook that checks the commited files are correctly formated. To install both hooks and clang-format, simply run <code>./scripts/install-scripts-linux.sh</code> on linux, or adapt to your OS.</p>
<h2>Radium test suite</h2>
<h3>Preliminaries</h3>
<p>Radium testing is done using two tools:</p>
<ul>
<li>CTest: the test system by CMake. It provides compilation, running and basic reporting mechanisms for tests.</li>
<li>Continuous Integration system: Travis.ci and AppVeyor. We use these services to call CTest on several plateforms (windows, ubuntu and macos) with several compilers, and validate any change made to the main repository.</li>
</ul>
<p>As a Radium contributor, and in most cases, you will have to work only with CTest, and let the CI system run your tests automatically. In this section we describe how to write a new test, how to insert it in the testing suite, and how to validate your results on your computer and the CI systems.</p>
<h3>How to write tests</h3>
<p>Tests are C++ executables, expected to set their return value accordingly to the test result, e.g. <code>return EXIT_FAILURE;</code> or by calling <code>abort();</code> in case of failure.</p>
<p>Their source code is stored in <code>Radium-Engine/tests/{Core,Engine,IO,Gui}Tests/src</code>.</p>
<p>We provide in <code>Radium-Engine/tests/Tests.hpp</code> some utility functions to ease tests implementation.</p>
<p>Let's consider the following snipplet: </p>
<pre class="fragment">  #include &lt;Core/Math/LinearAlgebra.hpp&gt;                        // include path contains Radium sources,
  #include &lt;OpenMesh/Tools/Subdivider/Uniform/CatmullClarkT.hh&gt; // Radium's dependencies
  #include &lt;Tests.hpp&gt;                                          // and the testing tools 

  namespace Ra {
  namespace Testing {

  void run() {
        bool condition = true;
        RA_VERIFY( condition, "This test is passing" );
        // RA_VERIFY( ! condition, "This test does not pass" );
  }

  } // namespace Testing
  } // namespace Ra


  int main(int argc, const char **argv) {
       using namespace Ra;

       if(!Testing::init_testing(1, argv))
       {     
            return EXIT_FAILURE;
       }

       #pragma omp parallel for
       for(int i = 0; i &lt; Testing::g_repeat; ++i)
       {
           CALL_SUBTEST(( Testing::run() ));
       }

       return EXIT_SUCCESS;
  }
</pre><p>The <code>Ra::Testing::run()</code> method is performing the tests, and use the macro <code>RA_VERIFY</code> to abort the execution if the condition fails. This macro is provided in <code>&lt;Tests.hpp&gt;</code>.</p>
<p>The <code>main()</code> is simple is should not vary to much across tests. It first initializes the testing helpers (including random number generation), and then call the testing function <code>g_repeat</code> times. Repetition is strongly encouraged, especially to test or detect piece of codes involving non-deterministic behavior. Of course, multiple functions can be called in place of the <code>run()</code> function shown in this example. A standard use case is: </p>
<pre class="fragment"> #pragma omp parallel for
 for(int i = 0; i &lt; Testing::g_repeat; ++i)
 {
      CALL_SUBTEST(( Testing::run&lt;float&gt;() ));
      CALL_SUBTEST(( Testing::run&lt;double&gt;() ));
      // ... other types
 }
</pre><p>Note that we target Unit Tests, which can be defined as: </p>
<blockquote class="doxtable">
<p>The purpose of a unit test in software engineering is to verify the behavior of a relatively small piece of software, independently from other parts. Unit tests are narrow in scope, and allow us to cover all cases, ensuring that every single part works correctly.</p>
<p></p>
</blockquote>
<p>Source: <a href="https://www.toptal.com/qa/how-to-write-testable-code-and-why-it-matters">https://www.toptal.com/qa/how-to-write-testable-code-and-why-it-matters</a></p>
<h3>How to add a test to the testing suite</h3>
<p>The testing suite is handled by <code>cmake</code>: tests need to be added with their sources and dependencies. We provide a <code>cmake</code> helper function to add a test easily: </p>
<pre class="fragment">radium_add_test( TARGET my_test_name SRC src/my_test.cpp LIBS radiumCore radiumEngine )
</pre><p>See <code>Radium-Engine/cmake/ConfigureTesting.cmake</code> for the implementation of this function, and <code>Radium-Engine/tests/CoreTests/CMakeLists.txt</code> for an usage example.</p>
<p>Tests are located in <code>Radium-Engine/tests/{Core,Engine,IO,Gui}Tests/src</code>. Currently <code>cmake</code> scripts are configured only for <code>Core</code>, you might need to copy and adapt them in case you add tests for the others packages (this is what you should do ! ;) ).</p>
<h3>How to run tests locally and on the CI systems</h3>
<p>First, you need to have the <code>cmake</code> option <code>RADIUM_COMPILE_TESTS</code> set to <code>ON</code> (the default).</p>
<p>To run the tests locally, you first need to compile them (<code>make buildtests</code>) and then call CTest (<code>make test</code>). You should get something like: </p>
<pre class="fragment">$ make test
Running tests...
Test project /home/me/build-Radium-Engine-Desktop-Release
      Start  1: test_core_algebra
 1/11 Test  #1: test_core_algebra ................   Passed    0.00 sec
      Start  2: test_core_animation
 2/11 Test  #2: test_core_animation ..............   Passed    0.01 sec
      Start  3: test_core_containers
 3/11 Test  #3: test_core_containers .............   Passed    0.00 sec
      Start  4: test_core_distance
 4/11 Test  #4: test_core_distance ...............   Passed    0.00 sec
      Start  5: test_core_geometry
 5/11 Test  #5: test_core_geometry ...............   Passed    0.00 sec
      Start  6: test_core_indexmap
 6/11 Test  #6: test_core_indexmap ...............   Passed    0.00 sec
      Start  7: test_core_mesh
 7/11 Test  #7: test_core_mesh ...................   Passed    0.00 sec
      Start  8: test_core_raycast
 8/11 Test  #8: test_core_raycast ................   Passed    0.01 sec
      Start  9: test_core_string
 9/11 Test  #9: test_core_string .................   Passed    0.00 sec
      Start 10: test_core_topomesh
10/11 Test #10: test_core_topomesh ...............   Passed    0.01 sec
      Start 11: test_core_polyline
11/11 Test #11: test_core_polyline ...............   Passed    0.00 sec

100% tests passed, 0 tests failed out of 11

Total Test time (real) =   0.06 sec
</pre><p>The standard output is not printed when using CTest. To debug a test, you might need to run it direcly. Tests binaries are located in <code>CMAKE_BUILD_PATH/tests/</code>.</p>
<p>Tests are automatically compiled and runned for Linux and MacOS CI, each time commits are pushed to Github. See snippet from TravisCI configuration file <code>Radium-Engine/.travis</code>: </p>
<pre class="fragment">script:
  - make -j 4
  - make buildtests &amp;&amp; make test</pre> </div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon Nov 19 2018 21:15:52 for Radium Engine by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
