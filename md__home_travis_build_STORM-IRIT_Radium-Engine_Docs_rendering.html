<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Radium Engine: Radium Engine default rendering informations</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js", "TeX/AMSsymbols.js", "TeX/AMSmath.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Radium Engine
   &#160;<span id="projectnumber">28bf594254a312693a0e8cbb8f95fa3e00d4a506</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('md__home_travis_build_STORM-IRIT_Radium-Engine_Docs_rendering.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Radium Engine default rendering informations </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><b>TODO : update this documentation wrt the new rendering algorithm</b></p>
<p><em>See ./material.md "Material management in the Radium Engine" documentation for understanding what is a render technique and how it interoperates with geometry, material and shaders.</em></p>
<h2>Main render method</h2>
<p>The <code>render</code> method cannot be modified, it always does the following stuff</p>
<p>``` void Renderer::render( const RenderData&amp; data ) { // 0. Save an eventual already bound FBO saveExternalFBOInternal();</p>
<p>// 1. Gather render objects and update them renderObjects = m_engine-&gt;getRenderObjectManager()-&gt;getRenderObjects(); updateRenderObjectsInternal( data, renderObjects );</p>
<p>// 2. Feed render queues feedRenderQueuesInternal( data, renderObjects );</p>
<p>// 3. Do picking if needed if ( !m_pickingQueries.empty() ) { doPicking(); }</p>
<p>// 4. Do the rendering. renderInternal( data );</p>
<p>// 5. Post processing postProcessInternal( data );</p>
<p>// 6. Write final texture to framebuffer / backbuffer // (depending on wether anything was saved on step 0. or not) drawScreenInternal(); } ```</p>
<h3>0. Save an eventual already bound FBO</h3>
<p>In some cases (like with <code>QtOpenGLWidget</code>), you do not draw directly on the screen, but you have instead to feed an already bound FBO. Since the default renderer uses multiple FBOs, the Qt's one must be saved.</p>
<p><em>This behaviour cannot be modified.</em></p>
<h3>3. Do picking if needed</h3>
<p>If there has been some picking requests since the last frame, <code>doPicking</code> is called. This function just renders all the objects (except <em>debug</em> ones) by drawing them in some color given the ID of the entity a render object is attached to.</p>
<p>Then, for each picking request done, <code>glReadPixels</code> is called at the requested location, and object ID is retrieved.</p>
<h3>4. Do the rendering</h3>
<p>This method does most of the whole rendering work and outputs one final <em>renderpass</em> texture, ready to be postprocessed.</p>
<p>Here is a summary of all the draw calls </p>
<h4>1. Depth, ambient color and "deferred info" pass</h4>
<p>This step</p>
<ul>
<li>only concerns opaque objects. It is used to, first, optimize the next pass by not drawing hidden fragments (early z-test since the depth buffer is already filled).</li>
<li>saves ambient color for each object.</li>
<li>saves the world normals and world positions for each object.</li>
</ul>
<h4>2. Lighing pass</h4>
<p>This pass is a classic forward lighting pass. Blending (one, one) is enabled and it does ``` for each light do for each shader do bind shader bind light for each material do bind material for each mesh do render mesh done done done done ```</p>
<h4>3. Debug and <a class="el" href="namespaceUI.html">UI</a> render objects</h4>
<p>Those objects are drawn with their own shader, and without lighting. They do not write in the depth map but they have different depth testing behaviour :</p>
<ul>
<li>func is LESS for debug objects (drawn only if visibles)</li>
<li>func is ALWAYS for <a class="el" href="namespaceUI.html">UI</a> objects (drawn in front of everything else)</li>
</ul>
<h4>4. Ordered independent transparency pass</h4>
<p>This pass basically implements the first pass of NVidia paper on Weighted blended order independent transparency (see <a href="http://jcgt.org/published/0002/02/09/">http://jcgt.org/published/0002/02/09/</a>)</p>
<h4>5. Compositing for the whole <em>render pass</em></h4>
<p>Two draw calls are done for this pass,</p>
<ul>
<li>the first one composes ambient and lighted textures</li>
<li>the second one blends (1-alpha, alpha) the last render result with the transparency textures</li>
</ul>
<h3>5. Do post-processing</h3>
<p>For now, this method just copies <code>renderpass</code> texture to <code>final</code> texture.</p>
<h3>6. Write final texture to framebuffer / backbuffer</h3>
<p>This method is just responsible for displaying the final stuff on screen or on the saved FBO.</p>
<h2>General informations</h2>
<ul>
<li>Only two methods can be overrided for the renderer, renderInternal (step 4) and postProcessInternal (step 5).</li>
</ul>
<h2>TODO</h2>
<ul>
<li>Ambient occlusion</li>
<li>Shadow mapping</li>
<li>Skybox</li>
<li>Reflection / refraction</li>
<li>Tonemapping</li>
<li>Bloom</li>
<li>Motion blur</li>
<li>FOV</li>
<li>Physically based rendering </li>
</ul>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon Nov 19 2018 21:15:52 for Radium Engine by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
